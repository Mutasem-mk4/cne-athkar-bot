name: Bot Reminders Schedule

on:
  schedule:
    # 03:00 UTC -> 6:00 AM Amman (Fajr)
    - cron: '0 3 * * *'
    # 05:00 UTC -> 8:00 AM Amman (Morning)
    - cron: '0 5 * * *'
    # 15:00 UTC -> 6:00 PM Amman (Evening)
    - cron: '0 15 * * *'
    # 21:00 UTC -> 12:00 AM Amman (Midnight)
    - cron: '0 21 * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  ping-endpoints:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Reminder
        run: |
          HOUR=$(date -u +%H)
          echo "Current UTC Hour: $HOUR"
          
          if [ "$HOUR" == "03" ]; then
            echo "ğŸ•Œ Triggering Fajr Reminder..."
            curl -s -X GET "https://cne-athkar-bot.vercel.app/api/cron/fajr"
          elif [ "$HOUR" == "05" ]; then
            echo "ğŸŒ… Triggering Morning Athkar..."
            curl -s -X GET "https://cne-athkar-bot.vercel.app/api/cron/morning"
          elif [ "$HOUR" == "15" ]; then
            echo "ğŸŒ™ Triggering Evening Athkar..."
            curl -s -X GET "https://cne-athkar-bot.vercel.app/api/cron/evening"
          elif [ "$HOUR" == "21" ]; then
            echo "ğŸŒ‘ Triggering Midnight Reminder..."
            curl -s -X GET "https://cne-athkar-bot.vercel.app/api/cron/midnight"
          else
            echo "â„¹ï¸ No specific reminder for hour $HOUR. Running general check..."
            # Optional: curl -s -X GET "https://cne-athkar-bot.vercel.app/api/cron/dispatch"
          fi
